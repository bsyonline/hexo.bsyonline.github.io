---
title: one question one answer
tags:
  - untag
category:
  - uncategory
author: bsyonline
lede: 没有摘要
date: 2019-07-28 11:26:51
thumbnail:
---



Q: 什么是索引

A: 索引是关系数据库中的一种存储数据结构，针对数据库表的一列或多列进行排序，从而快速定位，加速检索。



Q: MySQL有哪些索引

A: 主键索引， 唯一索引，哈希索引，fulltext索引。



Q: B+Tree索引和Hash索引的区别

A: B+Tree索引可以用于列相等的比较，范围查找，Like前半部分的比较，BTree的任何最左前缀都可以用来查找。Hash索引仅能用于相等的比较，不能用于范围查找，但是速度更快。



Q: 加了索引为什么没有生效

A: 索引是否生效，可以通过执行计划进行查看。

在一些情况下即使加了索引，也是不会生效的，比如：

1. 关联表使数据类型不相同或大小不同；
2. 字符串进行比较时字符集不同；
3. 数据类型不同的列，没有进行转换的情况下。

最终是否使用索引，是由查询优化器决定的，会根据检索条件，全表扫描的代价，各种执行方案对比等最终选择一个优化器觉得成本最低的方案执行。

如果索引没有生效，可以使用 ``FORCE INDEX`` 强制使用索引，但是会增加运维的成本。



Q: B+Tree数据结构都可以存储哪些内容

A: BTree节点可以存放key和数据，B+Tree的内节点只能存放key，数据只能存放在叶子节点。



Q: 为什么使用B+Tree二不使用二叉树或是红黑树

A: 和计算机处理数据的原理有关系。计算机会在两个地方存储数据，一个是内存，一个是磁盘。当我们使用的数据没有在内存中时，计算机就会报一个缺页异常，这时候内存和磁盘之间就会进行数据交换。计算机会在磁盘上找到数据存储的位置。由于磁盘在读取数据成本很高，为了提高性能，通常计算机会以这个位置为开始位置，向后预读页的整数倍大小数据，将这些数据加载到内存。如果使用二叉树或是红黑树，树的高度会很大，逻辑上很近的数值可能在物理上很远，预读的优势无法体现。BTree相对来说，出度很大，树的高度相对较小，逻辑相邻的数据物理上也相距很近，可以充分发挥预读的优势。B+Tree相对于BTree来说中间节点只存储key，占用空间更小，所以在相同大小的页中包含的节点就更多，在一次I/O预读的数据就更多。



Q: 什么是聚集索引和非聚集索引，他们有什么区别

A: 在InnoDB存储引擎中，B+Tree的叶子节点保存了完整的数据这种方式叫做聚集索引。MyISAM存储引擎中B+Tree在叶子节点存储的是数据的地址信息，这种方式叫做非聚集索引。如果一个表有多个列使用非聚集索引，那么主键索引和非主键索引结构上是一致的。如果使用聚集索引，那么主键索引的叶子节点存储了完整的数据信息，非主键索引的叶子节点存储的是列信息和主键的信息。



Q: 什么是回表

A: 在使用非主键索引查询时，通过索引查到主键，然后在通过主键进行一次查询，这个过程叫做回表。使用非主键索引进行查询时，可以使用索引覆盖（covering index）来避免回表。



Q: 什么是索引下推

A:



Q:

A:



Q:

A:



Q:

A:



Q:

A:



Q:

A:



Q:

A:



Q:

A:



Q:

A: